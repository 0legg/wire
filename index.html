



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="gRPC and protocol buffers for Android, Kotlin, and Java.">
      
      
      
        <meta name="author" content="Square, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="images/icon-square.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Wire</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="css/app.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="white">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#wire" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="Wire" class="md-header-nav__button md-logo">
          
            <img src="images/icon-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Wire
            </span>
            <span class="md-header-nav__topic">
              
                Overview
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/square/wire/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Wire
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="Wire" class="md-nav__button md-logo">
      
        <img src="images/icon-square.png" width="48" height="48">
      
    </a>
    Wire
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/square/wire/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Wire
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="." title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#protocol-buffers" title="Protocol Buffers" class="md-nav__link">
    Protocol Buffers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-wire" title="Why Wire?" class="md-nav__link">
    Why Wire?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wire-kotlin" title="Wire Kotlin" class="md-nav__link">
    Wire Kotlin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wire-grpc" title="Wire gRPC" class="md-nav__link">
    Wire gRPC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-code-with-wire" title="Generating Code With Wire" class="md-nav__link">
    Generating Code With Wire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-wire" title="Get Wire" class="md-nav__link">
    Get Wire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unsupported" title="Unsupported" class="md-nav__link">
    Unsupported
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-documentation" title="Further Documentation" class="md-nav__link">
    Further Documentation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="wire_compiler/" title="Gradle Plugin" class="md-nav__link">
      Gradle Plugin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="wire_grpc/" title="gRPC" class="md-nav__link">
      gRPC
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://stackoverflow.com/questions/tagged/wire?sort=active" title="Stack Overflow ⏏" class="md-nav__link">
      Stack Overflow ⏏
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      3.x API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        3.x API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="3.x/wire-grpc-client/com.squareup.wire/" title="wire-grpc-client" class="md-nav__link">
      wire-grpc-client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="3.x/wire-moshi-adapter/com.squareup.wire/" title="wire-moshi-adapter" class="md-nav__link">
      wire-moshi-adapter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="3.x/wire-runtime/com.squareup.wire/" title="wire-runtime" class="md-nav__link">
      wire-runtime
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      2.x API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        2.x API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/wire/2.x/wire-gson-support/" title="wire-gson-support ⏏" class="md-nav__link">
      wire-gson-support ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/wire/2.x/wire-runtime/" title="wire-runtime ⏏" class="md-nav__link">
      wire-runtime ⏏
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="changelog/" title="Change Log" class="md-nav__link">
      Change Log
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://developers.google.com/protocol-buffers/docs/proto" title="Protocol Buffers ⏏" class="md-nav__link">
      Protocol Buffers ⏏
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#protocol-buffers" title="Protocol Buffers" class="md-nav__link">
    Protocol Buffers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-wire" title="Why Wire?" class="md-nav__link">
    Why Wire?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wire-kotlin" title="Wire Kotlin" class="md-nav__link">
    Wire Kotlin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wire-grpc" title="Wire gRPC" class="md-nav__link">
    Wire gRPC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-code-with-wire" title="Generating Code With Wire" class="md-nav__link">
    Generating Code With Wire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-wire" title="Get Wire" class="md-nav__link">
    Get Wire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unsupported" title="Unsupported" class="md-nav__link">
    Unsupported
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-documentation" title="Further Documentation" class="md-nav__link">
    Further Documentation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/square/wire/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="wire">Wire<a class="headerlink" href="#wire" title="Permanent link">&para;</a></h1>
<p><em>“A man got to have a code!”</em> - Omar Little</p>
<p>As our teams and programs grow, the variety and volume of data also grows. Success will turn your
simple data models into complex ones! Whether your application is storing data to disk or
transmitting it over a network, the structure and interpretation of that data should be clear.
Consumers work best with data they understand!</p>
<p>Schemas describe and document data models. If you have data, you should have a schema.</p>
<h2 id="protocol-buffers">Protocol Buffers<a class="headerlink" href="#protocol-buffers" title="Permanent link">&para;</a></h2>
<p><a href="https://developers.google.com/protocol-buffers/docs/overview">Google&rsquo;s Protocol Buffers</a> are built around a great schema language:</p>
<ul>
<li>
<p>It&rsquo;s cross platform and language independent. Whatever programming language you use, you&rsquo;ll be
   able to use proto schemas with your application.</p>
</li>
<li>
<p>Proto schemas are backwards-compatible and future-proof. You can evolve your schema as your
   application loses old features and gains new ones.</p>
</li>
<li>
<p>It&rsquo;s focused. Proto schemas describe your data models. That&rsquo;s it.</p>
</li>
</ul>
<p>Here&rsquo;s a sample message definition:</p>
<div class="codehilite"><pre><span></span><span class="na">syntax</span> <span class="o">=</span> <span class="s">&quot;proto2&quot;</span><span class="p">;</span>

<span class="kn">package</span> <span class="nn">squareup</span><span class="o">.</span><span class="n">dinosaurs</span><span class="p">;</span>

<span class="k">option</span> <span class="na">java_package</span> <span class="o">=</span> <span class="s">&quot;com.squareup.dinosaurs&quot;</span><span class="p">;</span>

<span class="k">import</span> <span class="s">&quot;squareup/geology/period.proto&quot;</span><span class="p">;</span>

<span class="kd">message</span> <span class="nc">Dinosaur</span> <span class="p">{</span>
  <span class="c1">// Common name of this dinosaur, like &quot;Stegosaurus&quot;.</span>
  <span class="k">optional</span> <span class="kt">string</span> <span class="na">name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// URLs with images of this dinosaur.</span>
  <span class="k">repeated</span> <span class="kt">string</span> <span class="na">picture_urls</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

  <span class="k">optional</span> <span class="n">squareup.geology.Period</span> <span class="na">period</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>And here&rsquo;s an enum definition:</p>
<div class="codehilite"><pre><span></span><span class="na">syntax</span> <span class="o">=</span> <span class="s">&quot;proto2&quot;</span><span class="p">;</span>

<span class="kn">package</span> <span class="nn">squareup</span><span class="o">.</span><span class="n">geology</span><span class="p">;</span>

<span class="k">option</span> <span class="na">java_package</span> <span class="o">=</span> <span class="s">&quot;com.squareup.geology&quot;</span><span class="p">;</span>

<span class="kd">enum</span> <span class="n">Period</span> <span class="p">{</span>
  <span class="c1">// 145.5 million years ago — 66.0 million years ago.</span>
  <span class="na">CRETACEOUS</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// 201.3 million years ago — 145.0 million years ago.</span>
  <span class="na">JURASSIC</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

  <span class="c1">// 252.17 million years ago — 201.3 million years ago.</span>
  <span class="na">TRIASSIC</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This schema language is Protocol Buffers&rsquo; best feature. You might even use it purely for
documentation purposes, such as to describe a JSON API.</p>
<p>Protocol Buffers also defines a compact binary encoding of messages that conform to the schema. This
encoding is fast to encode, fast to decode, small to transmit, and small to store. The binary
encoding uses numeric tags from the schema, like the <code>5</code> for <code>period</code> above.</p>
<p>For example, let&rsquo;s encode this dinosaur:</p>
<div class="codehilite"><pre><span></span>{
  name: &quot;Stegosaurus&quot;,
  period: JURASSIC
}
</pre></div>

<p>The encoded value is just 15 bytes:</p>
<div class="codehilite"><pre><span></span>Hex  Description
 0a  tag: name(1), field encoding: LENGTH_DELIMITED(2). 1 &lt;&lt; 3 | 2
 0b  &quot;Stegosaurus&quot;.length()
 53  &#39;S&#39;
 74  &#39;t&#39;
 65  &#39;e&#39;
 67  &#39;g&#39;
 6f  &#39;o&#39;
 73  &#39;s&#39;
 61  &#39;a&#39;
 75  &#39;u&#39;
 72  &#39;r&#39;
 75  &#39;u&#39;
 73  &#39;s&#39;
 28  tag: period(5), field encoding: VARINT(0). 5 &lt;&lt; 3 | 0
 02  JURASSIC(2)
</pre></div>

<h2 id="why-wire">Why Wire?<a class="headerlink" href="#why-wire" title="Permanent link">&para;</a></h2>
<p>The Protocol Buffers schema language and binary encoding are both defined by Google. Wire is an
independent implementation from Square that&rsquo;s specifically designed for Android and Java.</p>
<p>For each message type defined in the schema, Wire generates an immutable model class and its
builder. The generated code looks like code you&rsquo;d write by hand: it&rsquo;s documented, formatted, and
simple. Wire&rsquo;s APIs should feel at home to programmers who like <a href="https://www.amazon.ca/Effective-Java-3rd-Joshua-Bloch/dp/0134685997/">Effective Java</a>.</p>
<p>That said, there are some interesting design decisions in Wire:</p>
<ul>
<li>
<p>Wire messages declare <code>public final</code> fields instead of the usual getter methods. This cuts down
   on both code generated and code executed. Less code is particularly beneficial for Android
   programs.</p>
</li>
<li>
<p>Wire avoids case mapping. A field declared as <code>picture_urls</code> in a schema yields a Java field
   <code>picture_urls</code> and not the conventional <code>pictureUrls</code> camel case. Though the name feels awkward
   at first, it&rsquo;s fantastic whenever you use <code>grep</code> or more sophisticated search tools. No more
   mapping when navigating between schema, Java source code, and data. It also provides a gentle
   reminder to calling code that proto messages are a bit special.</p>
</li>
<li>
<p>Primitive types are always boxed. If a field is absent, its value is <code>null</code>. This is used for
   naturally optional fields, such as a dinosaur whose period is unknown. A field may also be null
   due to schema evolution: if tomorrow we add a <code>carnivore</code> boolean to our message definition,
   today&rsquo;s data won’t have a value for that field.</p>
</li>
</ul>
<p>Here&rsquo;s the compact generated code for the <code>Dinosaur</code> message defined above:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Code generated by Wire protocol buffer compiler, do not edit.</span>
<span class="c1">// Source file: squareup/dinosaurs/dinosaur.proto at 9:1</span>
<span class="kn">package</span> <span class="nn">com.squareup.dinosaurs</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.squareup.geology.Period</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.squareup.wire.Message</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.squareup.wire.ProtoAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.squareup.wire.WireField</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">okio.ByteString</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Dinosaur</span> <span class="kd">extends</span> <span class="n">Message</span><span class="o">&lt;</span><span class="n">Dinosaur</span><span class="o">,</span> <span class="n">Dinosaur</span><span class="o">.</span><span class="na">Builder</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ProtoAdapter</span><span class="o">&lt;</span><span class="n">Dinosaur</span><span class="o">&gt;</span> <span class="n">ADAPTER</span> <span class="o">=</span> <span class="n">ProtoAdapter</span><span class="o">.</span><span class="na">newMessageAdapter</span><span class="o">(</span><span class="n">Dinosaur</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">0</span><span class="n">L</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DEFAULT_NAME</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Period</span> <span class="n">DEFAULT_PERIOD</span> <span class="o">=</span> <span class="n">Period</span><span class="o">.</span><span class="na">CRETACEOUS</span><span class="o">;</span>

  <span class="cm">/**</span>
<span class="cm">   * Common name of this dinosaur, like &quot;Stegosaurus&quot;.</span>
<span class="cm">   */</span>
  <span class="nd">@WireField</span><span class="o">(</span>
      <span class="n">tag</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span>
      <span class="n">adapter</span> <span class="o">=</span> <span class="s">&quot;com.squareup.wire.ProtoAdapter#STRING&quot;</span>
  <span class="o">)</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="cm">/**</span>
<span class="cm">   * URLs with images of this dinosaur.</span>
<span class="cm">   */</span>
  <span class="nd">@WireField</span><span class="o">(</span>
      <span class="n">tag</span> <span class="o">=</span> <span class="mi">2</span><span class="o">,</span>
      <span class="n">adapter</span> <span class="o">=</span> <span class="s">&quot;com.squareup.wire.ProtoAdapter#STRING&quot;</span><span class="o">,</span>
      <span class="n">label</span> <span class="o">=</span> <span class="n">WireField</span><span class="o">.</span><span class="na">Label</span><span class="o">.</span><span class="na">REPEATED</span>
  <span class="o">)</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">picture_urls</span><span class="o">;</span>

  <span class="nd">@WireField</span><span class="o">(</span>
      <span class="n">tag</span> <span class="o">=</span> <span class="mi">5</span><span class="o">,</span>
      <span class="n">adapter</span> <span class="o">=</span> <span class="s">&quot;com.squareup.geology.Period#ADAPTER&quot;</span>
  <span class="o">)</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">Period</span> <span class="n">period</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Dinosaur</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">picture_urls</span><span class="o">,</span> <span class="n">Period</span> <span class="n">period</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">picture_urls</span><span class="o">,</span> <span class="n">period</span><span class="o">,</span> <span class="n">ByteString</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Dinosaur</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">picture_urls</span><span class="o">,</span> <span class="n">Period</span> <span class="n">period</span><span class="o">,</span> <span class="n">ByteString</span> <span class="n">unknownFields</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">unknownFields</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">picture_urls</span> <span class="o">=</span> <span class="n">immutableCopyOf</span><span class="o">(</span><span class="s">&quot;picture_urls&quot;</span><span class="o">,</span> <span class="n">picture_urls</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">period</span> <span class="o">=</span> <span class="n">period</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">newBuilder</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Builder</span><span class="o">();</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">picture_urls</span> <span class="o">=</span> <span class="n">copyOf</span><span class="o">(</span><span class="s">&quot;picture_urls&quot;</span><span class="o">,</span> <span class="n">picture_urls</span><span class="o">);</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">period</span> <span class="o">=</span> <span class="n">period</span><span class="o">;</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">addUnknownFields</span><span class="o">(</span><span class="n">unknownFields</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">builder</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">other</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(!(</span><span class="n">other</span> <span class="k">instanceof</span> <span class="n">Dinosaur</span><span class="o">))</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">Dinosaur</span> <span class="n">o</span> <span class="o">=</span> <span class="o">(</span><span class="n">Dinosaur</span><span class="o">)</span> <span class="n">other</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">equals</span><span class="o">(</span><span class="n">unknownFields</span><span class="o">(),</span> <span class="n">o</span><span class="o">.</span><span class="na">unknownFields</span><span class="o">())</span>
        <span class="o">&amp;&amp;</span> <span class="n">equals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">o</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="n">equals</span><span class="o">(</span><span class="n">picture_urls</span><span class="o">,</span> <span class="n">o</span><span class="o">.</span><span class="na">picture_urls</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="n">equals</span><span class="o">(</span><span class="n">period</span><span class="o">,</span> <span class="n">o</span><span class="o">.</span><span class="na">period</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">hashCode</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">unknownFields</span><span class="o">().</span><span class="na">hashCode</span><span class="o">();</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="mi">37</span> <span class="o">+</span> <span class="o">(</span><span class="n">name</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">name</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="mi">37</span> <span class="o">+</span> <span class="o">(</span><span class="n">picture_urls</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">picture_urls</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">:</span> <span class="mi">1</span><span class="o">);</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="mi">37</span> <span class="o">+</span> <span class="o">(</span><span class="n">period</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">period</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">hashCode</span> <span class="o">=</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Builder</span> <span class="kd">extends</span> <span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">wire</span><span class="o">.</span><span class="na">Message</span><span class="o">.</span><span class="na">Builder</span><span class="o">&lt;</span><span class="n">Dinosaur</span><span class="o">,</span> <span class="n">Builder</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">picture_urls</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">Period</span> <span class="n">period</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Builder</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">picture_urls</span> <span class="o">=</span> <span class="n">newMutableList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Common name of this dinosaur, like &quot;Stegosaurus&quot;.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">name</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * URLs with images of this dinosaur.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">picture_urls</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">picture_urls</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">checkElementsNotNull</span><span class="o">(</span><span class="n">picture_urls</span><span class="o">);</span>
      <span class="k">this</span><span class="o">.</span><span class="na">picture_urls</span> <span class="o">=</span> <span class="n">picture_urls</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">period</span><span class="o">(</span><span class="n">Period</span> <span class="n">period</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">period</span> <span class="o">=</span> <span class="n">period</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Dinosaur</span> <span class="nf">build</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">Dinosaur</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">picture_urls</span><span class="o">,</span> <span class="n">period</span><span class="o">,</span> <span class="n">buildUnknownFields</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>The Java code to create and access proto models is compact and readable:</p>
<div class="codehilite"><pre><span></span><span class="n">Dinosaur</span> <span class="n">stegosaurus</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dinosaur</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">&quot;Stegosaurus&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">period</span><span class="o">(</span><span class="n">Period</span><span class="o">.</span><span class="na">JURASSIC</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;My favorite dinosaur existed in the &quot;</span> <span class="o">+</span> <span class="n">stegosaurus</span><span class="o">.</span><span class="na">period</span> <span class="o">+</span> <span class="s">&quot; period.&quot;</span><span class="o">);</span>
</pre></div>

<p>Each type has a corresponding <code>ProtoAdapter</code> that can encode a message to bytes and decode bytes
back into a message.</p>
<div class="codehilite"><pre><span></span><span class="n">Dinosaur</span> <span class="n">stegosaurus</span> <span class="o">=</span> <span class="o">...</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">stegosaurusBytes</span> <span class="o">=</span> <span class="n">Dinosaur</span><span class="o">.</span><span class="na">ADAPTER</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">stegosaurus</span><span class="o">);</span>

<span class="kt">byte</span><span class="o">[]</span> <span class="n">tyrannosaurusBytes</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">Dinosaur</span> <span class="n">tyrannosaurus</span> <span class="o">=</span> <span class="n">Dinosaur</span><span class="o">.</span><span class="na">ADAPTER</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">tyrannosaurusBytes</span><span class="o">);</span>
</pre></div>

<p>When accessing a field, use <code>Wire.get()</code> to replace null values with the corresponding default:</p>
<div class="codehilite"><pre><span></span><span class="n">Period</span> <span class="n">period</span> <span class="o">=</span> <span class="n">Wire</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">stegosaurus</span><span class="o">.</span><span class="na">period</span><span class="o">,</span> <span class="n">Dinosaur</span><span class="o">.</span><span class="na">DEFAULT_PERIOD</span><span class="o">);</span>
</pre></div>

<p>This is equivalent to the following:</p>
<div class="codehilite"><pre><span></span>Period period = stegosaurus.period != null ? stegosaurus.period : Dinosaur.DEFAULT_PERIOD;
</pre></div>

<h2 id="wire-kotlin">Wire Kotlin<a class="headerlink" href="#wire-kotlin" title="Permanent link">&para;</a></h2>
<p>Since version 3.0.0, Wire can generate Kotlin code. See 
<a href="wire_compiler">Wire Compiler &amp; Gradle Plugin</a> to learn how to configure your build.</p>
<p>Kotlin is a pragmatic and expressive programming language that makes it easy to model data. Here&rsquo;s 
how we used Kotlin to model Protocol Buffers messages:</p>
<ul>
<li>Messages feel like <code>data</code> classes, but in fact they&rsquo;re not. Compiler still generates <code>equals()</code>,
   <code>hashCode()</code>, <code>toString()</code> and <code>copy()</code> for you. Wire does not generate <code>componentN()</code> functions
   though, we believe that destructuring declarations are not a good fit for Protocol Buffers: a
   change in the schema that removes or adds a field might lead to a situation when your 
   destructuring declaration still compiles but now describes a completely different subset of 
   fields, rendering your code incorrect. </li>
<li><code>copy()</code> is a substitute for the <code>Builder</code>, which is not used anymore. If your program relies on
   the <code>Builder</code> to be present, you may generate code in Java interoperability mode - 
   <a href="wire_compiler">Wire Compiler &amp; Gradle Plugin</a> explains how that works.</li>
<li>Fields are generated as properties. While this is idiomatic in Kotlin, Java code will now have
   to access fields using getters. If your program relies on accessing fields directly, use Java 
   interoperability mode - the compiler will generate <code>@JvmField</code> annotations for each field.</li>
<li>The nullability of each field&rsquo;s type depends on its label: <code>required</code>, <code>repeated</code> and <code>map</code> 
   fields get non-nullable types, whereas <code>optional</code> fields are of nullable types.   </li>
<li>
<p>With the exception of <code>required</code> fields, each field has a default value: </p>
</li>
<li>
<p>null for <code>optional</code> fields,</p>
</li>
<li><code>emptyList()</code> for <code>repeated</code> fields,</li>
<li><code>emptyMap()</code> for <code>map</code> fields.</li>
</ul>
<p>Here&rsquo;s the same <code>Dinosaur</code> message in Kotlin:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Code generated by Wire protocol buffer compiler, do not edit.</span>
<span class="c1">// Source file: squareup/dinosaurs/dinosaur.proto</span>
<span class="k">package</span> <span class="nn">com.squareup.dinosaurs</span>

<span class="k">import</span> <span class="nn">com.squareup.geology.Period</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.FieldEncoding</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.Message</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.ProtoAdapter</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.ProtoReader</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.ProtoWriter</span>
<span class="k">import</span> <span class="nn">com.squareup.wire.WireField</span>
<span class="k">import</span> <span class="nn">kotlin.Any</span>
<span class="k">import</span> <span class="nn">kotlin.AssertionError</span>
<span class="k">import</span> <span class="nn">kotlin.Boolean</span>
<span class="k">import</span> <span class="nn">kotlin.Deprecated</span>
<span class="k">import</span> <span class="nn">kotlin.DeprecationLevel</span>
<span class="k">import</span> <span class="nn">kotlin.Int</span>
<span class="k">import</span> <span class="nn">kotlin.Nothing</span>
<span class="k">import</span> <span class="nn">kotlin.String</span>
<span class="k">import</span> <span class="nn">kotlin.collections.List</span>
<span class="k">import</span> <span class="nn">kotlin.hashCode</span>
<span class="k">import</span> <span class="nn">kotlin.jvm.JvmField</span>
<span class="k">import</span> <span class="nn">okio.ByteString</span>

<span class="k">class</span> <span class="nc">Dinosaur</span><span class="p">(</span>
  <span class="cm">/**</span>
<span class="cm">   * Common name of this dinosaur, like &quot;Stegosaurus&quot;.</span>
<span class="cm">   */</span>
  <span class="n">@field</span><span class="p">:</span><span class="n">WireField</span><span class="p">(</span>
    <span class="n">tag</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
    <span class="n">adapter</span> <span class="p">=</span> <span class="s">&quot;com.squareup.wire.ProtoAdapter#STRING&quot;</span>
  <span class="p">)</span>
  <span class="k">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="cm">/**</span>
<span class="cm">   * URLs with images of this dinosaur.</span>
<span class="cm">   */</span>
  <span class="n">@field</span><span class="p">:</span><span class="n">WireField</span><span class="p">(</span>
    <span class="n">tag</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
    <span class="n">adapter</span> <span class="p">=</span> <span class="s">&quot;com.squareup.wire.ProtoAdapter#STRING&quot;</span><span class="p">,</span>
    <span class="n">label</span> <span class="p">=</span> <span class="n">WireField</span><span class="p">.</span><span class="n">Label</span><span class="p">.</span><span class="n">REPEATED</span>
  <span class="p">)</span>
  <span class="k">val</span> <span class="py">picture_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">emptyList</span><span class="p">(),</span>
  <span class="n">@field</span><span class="p">:</span><span class="n">WireField</span><span class="p">(</span>
    <span class="n">tag</span> <span class="p">=</span> <span class="m">5</span><span class="p">,</span>
    <span class="n">adapter</span> <span class="p">=</span> <span class="s">&quot;com.squareup.geology.Period#ADAPTER&quot;</span>
  <span class="p">)</span>
  <span class="k">val</span> <span class="py">period</span><span class="p">:</span> <span class="n">Period</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">unknownFields</span><span class="p">:</span> <span class="n">ByteString</span> <span class="p">=</span> <span class="n">ByteString</span><span class="p">.</span><span class="n">EMPTY</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">Message</span><span class="p">&lt;</span><span class="n">Dinosaur</span><span class="p">,</span> <span class="n">Nothing</span><span class="p">&gt;(</span><span class="n">ADAPTER</span><span class="p">,</span> <span class="n">unknownFields</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">@Deprecated</span><span class="p">(</span>
    <span class="n">message</span> <span class="p">=</span> <span class="s">&quot;Shouldn&#39;t be used in Kotlin&quot;</span><span class="p">,</span>
    <span class="n">level</span> <span class="p">=</span> <span class="n">DeprecationLevel</span><span class="p">.</span><span class="n">HIDDEN</span>
  <span class="p">)</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">newBuilder</span><span class="p">():</span> <span class="n">Nothing</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">AssertionError</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">?):</span> <span class="n">Boolean</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">other</span> <span class="p">===</span> <span class="k">this</span><span class="p">)</span> <span class="k">return</span> <span class="k">true</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">other</span> <span class="p">!</span><span class="k">is</span> <span class="n">Dinosaur</span><span class="p">)</span> <span class="k">return</span> <span class="k">false</span>
    <span class="k">return</span> <span class="n">unknownFields</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">unknownFields</span>
        <span class="p">&amp;&amp;</span> <span class="n">name</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">name</span>
        <span class="p">&amp;&amp;</span> <span class="n">picture_urls</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">picture_urls</span>
        <span class="p">&amp;&amp;</span> <span class="n">period</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">period</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">hashCode</span><span class="p">():</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">result</span> <span class="p">=</span> <span class="k">super</span><span class="p">.</span><span class="n">hashCode</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">result</span> <span class="p">=</span> <span class="n">name</span><span class="p">.</span><span class="n">hashCode</span><span class="p">()</span>
      <span class="n">result</span> <span class="p">=</span> <span class="n">result</span> <span class="p">*</span> <span class="m">37</span> <span class="p">+</span> <span class="n">picture_urls</span><span class="p">.</span><span class="n">hashCode</span><span class="p">()</span>
      <span class="n">result</span> <span class="p">=</span> <span class="n">result</span> <span class="p">*</span> <span class="m">37</span> <span class="p">+</span> <span class="n">period</span><span class="p">.</span><span class="n">hashCode</span><span class="p">()</span>
      <span class="k">super</span><span class="p">.</span><span class="n">hashCode</span> <span class="p">=</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">toString</span><span class="p">():</span> <span class="n">String</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">result</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;()</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="n">result</span> <span class="p">+=</span> <span class="s">&quot;&quot;&quot;name=$name&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">picture_urls</span><span class="p">.</span><span class="n">isNotEmpty</span><span class="p">())</span> <span class="n">result</span> <span class="p">+=</span> <span class="s">&quot;&quot;&quot;picture_urls=$picture_urls&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">period</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="n">result</span> <span class="p">+=</span> <span class="s">&quot;&quot;&quot;period=$period&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="n">joinToString</span><span class="p">(</span><span class="n">prefix</span> <span class="p">=</span> <span class="s">&quot;Dinosaur{&quot;</span><span class="p">,</span> <span class="n">separator</span> <span class="p">=</span> <span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">postfix</span> <span class="p">=</span> <span class="s">&quot;}&quot;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">fun</span> <span class="nf">copy</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">picture_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">picture_urls</span><span class="p">,</span>
    <span class="n">period</span><span class="p">:</span> <span class="n">Period</span><span class="p">?</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">period</span><span class="p">,</span>
    <span class="n">unknownFields</span><span class="p">:</span> <span class="n">ByteString</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">unknownFields</span>
  <span class="p">):</span> <span class="n">Dinosaur</span> <span class="p">=</span> <span class="n">Dinosaur</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">picture_urls</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">unknownFields</span><span class="p">)</span>

  <span class="k">companion</span> <span class="k">object</span> <span class="p">{</span>
    <span class="n">@JvmField</span>
    <span class="k">val</span> <span class="py">ADAPTER</span><span class="p">:</span> <span class="n">ProtoAdapter</span><span class="p">&lt;</span><span class="n">Dinosaur</span><span class="p">&gt;</span> <span class="p">=</span> <span class="k">object</span> <span class="p">:</span> <span class="nc">ProtoAdapter</span><span class="p">&lt;</span><span class="n">Dinosaur</span><span class="p">&gt;(</span>
      <span class="n">FieldEncoding</span><span class="p">.</span><span class="n">LENGTH_DELIMITED</span><span class="p">,</span> 
      <span class="n">Dinosaur</span><span class="o">::</span><span class="k">class</span>
    <span class="err">) {</span>
      <span class="k">override</span> <span class="k">fun</span> <span class="nf">encodedSize</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Dinosaur</span><span class="p">):</span> <span class="n">Int</span> <span class="p">=</span> 
        <span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">encodedSizeWithTag</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="p">+</span>
        <span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">asRepeated</span><span class="p">().</span><span class="n">encodedSizeWithTag</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">picture_urls</span><span class="p">)</span> <span class="p">+</span>
        <span class="n">Period</span><span class="p">.</span><span class="n">ADAPTER</span><span class="p">.</span><span class="n">encodedSizeWithTag</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">period</span><span class="p">)</span> <span class="p">+</span>
        <span class="n">value</span><span class="p">.</span><span class="n">unknownFields</span><span class="p">.</span><span class="n">size</span>

      <span class="k">override</span> <span class="k">fun</span> <span class="nf">encode</span><span class="p">(</span><span class="n">writer</span><span class="p">:</span> <span class="n">ProtoWriter</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dinosaur</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">encodeWithTag</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">asRepeated</span><span class="p">().</span><span class="n">encodeWithTag</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">picture_urls</span><span class="p">)</span>
        <span class="n">Period</span><span class="p">.</span><span class="n">ADAPTER</span><span class="p">.</span><span class="n">encodeWithTag</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">period</span><span class="p">)</span>
        <span class="n">writer</span><span class="p">.</span><span class="n">writeBytes</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">unknownFields</span><span class="p">)</span>
      <span class="p">}</span>

      <span class="k">override</span> <span class="k">fun</span> <span class="nf">decode</span><span class="p">(</span><span class="n">reader</span><span class="p">:</span> <span class="n">ProtoReader</span><span class="p">):</span> <span class="n">Dinosaur</span> <span class="p">{</span>
        <span class="k">var</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
        <span class="k">val</span> <span class="py">picture_urls</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;()</span>
        <span class="k">var</span> <span class="py">period</span><span class="p">:</span> <span class="n">Period</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
        <span class="k">val</span> <span class="py">unknownFields</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">forEachTag</span> <span class="p">{</span> <span class="n">tag</span> <span class="p">-&gt;</span>
          <span class="k">when</span> <span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="p">{</span>
            <span class="m">1</span> <span class="p">-&gt;</span> <span class="n">name</span> <span class="p">=</span> <span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="m">2</span> <span class="p">-&gt;</span> <span class="n">picture_urls</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ProtoAdapter</span><span class="p">.</span><span class="n">STRING</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">reader</span><span class="p">))</span>
            <span class="m">5</span> <span class="p">-&gt;</span> <span class="n">period</span> <span class="p">=</span> <span class="n">Period</span><span class="p">.</span><span class="n">ADAPTER</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">-&gt;</span> <span class="n">reader</span><span class="p">.</span><span class="n">readUnknownField</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Dinosaur</span><span class="p">(</span>
          <span class="n">name</span> <span class="p">=</span> <span class="n">name</span><span class="p">,</span>
          <span class="n">picture_urls</span> <span class="p">=</span> <span class="n">picture_urls</span><span class="p">,</span>
          <span class="n">period</span> <span class="p">=</span> <span class="n">period</span><span class="p">,</span>
          <span class="n">unknownFields</span> <span class="p">=</span> <span class="n">unknownFields</span>
        <span class="p">)</span>
      <span class="p">}</span>

      <span class="k">override</span> <span class="k">fun</span> <span class="nf">redact</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Dinosaur</span><span class="p">):</span> <span class="n">Dinosaur</span> <span class="p">=</span> <span class="n">value</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span>
        <span class="n">unknownFields</span> <span class="p">=</span> <span class="n">ByteString</span><span class="p">.</span><span class="n">EMPTY</span>
      <span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Creating and accessing proto models is easy:</p>
<div class="codehilite"><pre><span></span><span class="k">val</span> <span class="py">stegosaurus</span> <span class="p">=</span> <span class="n">Dinosaur</span><span class="p">(</span>
    <span class="n">name</span> <span class="p">=</span> <span class="s">&quot;Stegosaurus&quot;</span><span class="p">,</span>
    <span class="n">period</span> <span class="p">=</span> <span class="n">Period</span><span class="p">.</span><span class="n">JURASSIC</span>
<span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;My favorite dinosaur existed in the ${stegosaurus.period} period.&quot;</span><span class="p">)</span>
</pre></div>

<p>Here&rsquo;s how you can modify the object to add extra fields:</p>
<div class="codehilite"><pre><span></span><span class="k">val</span> <span class="py">stegosaurus</span> <span class="p">=</span> <span class="n">stegosaurus</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span>
    <span class="n">picture_urls</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="s">&quot;https://www.flickr.com/photos/tags/Stegosaurus/&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;Here are some photos of ${stegosaurus.name}: ${stegosaurus.picture_urls}&quot;</span><span class="p">)</span>
</pre></div>

<h2 id="wire-grpc">Wire gRPC<a class="headerlink" href="#wire-grpc" title="Permanent link">&para;</a></h2>
<p>Since version 3.0.0, Wire supports <a href="wire_grpc">gRPC</a>.</p>
<h2 id="generating-code-with-wire">Generating Code With Wire<a class="headerlink" href="#generating-code-with-wire" title="Permanent link">&para;</a></h2>
<p>Wire&rsquo;s compiler is available via a Maven plugin. Put <code>.proto</code> sources in your project&rsquo;s
<code>src/main/proto</code> directory, then use the plugin to generate <code>.java</code> files. The plugin will
automatically add the generated Java code to your project&rsquo;s source roots.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.squareup.wire<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>wire-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>${project.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;phase&gt;</span>generate-sources<span class="nt">&lt;/phase&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>generate-sources<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
              <span class="c">&lt;!-- proto package names to generate code for --&gt;</span>
              <span class="nt">&lt;include&gt;</span>squareup.dinosaurs.*<span class="nt">&lt;/include&gt;</span>
              <span class="nt">&lt;include&gt;</span>squareup.geology.*<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</pre></div>

<p>Wire can read <code>.proto</code> files from the local file system and from within <code>.jar</code> files.</p>
<p>The compiler can optionally prune your schema to a subset of root types and their transitive
dependencies. This is useful when sharing a schema between projects: a Java service and Android app
may each use a subset of a larger shared schema.</p>
<p>If you don&rsquo;t use Maven, the compiler also has a command line interface. Just substitute
<code>wire-compiler-VERSION-jar-with-dependencies.jar</code> with the path to your jar. <a href="https://search.maven.org/remote_content?g=com.squareup.wire&amp;a=wire-compiler&amp;c=jar-with-dependencies&amp;v=LATEST">Download</a> the latest precompiled jar.</p>
<div class="codehilite"><pre><span></span>% java -jar wire-compiler-VERSION-jar-with-dependencies.jar \
    --proto_path=src/main/proto \
    --java_out=out \
    squareup/dinosaurs/dinosaur.proto \
    squareup/geology/period.proto
Writing com.squareup.dinosaurs.Dinosaur to out
Writing com.squareup.geology.Period to out
</pre></div>


<p>Supplying the <code>--android</code> flag to the compiler causes Wire messages to implement <code>Parcelable</code>.</p>
<p>If you use Proguard, then you need to add <code>keep</code> rules.  The simplest option is to tell Proguard not
to touch the Wire runtime library and your generated protocol buffers (of course these simple rules
will miss opportunities to shrink and optimize the code):</p>
<div class="codehilite"><pre><span></span>-keep class com.squareup.wire.** { *; }
-keep class com.yourcompany.yourgeneratedcode.** { *; }
</pre></div>


<h2 id="get-wire">Get Wire<a class="headerlink" href="#get-wire" title="Permanent link">&para;</a></h2>
<p>The <code>wire-runtime</code> package contains runtime support libraries that must be included in applications
that use Wire-generated code.</p>
<p>With Maven:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.wire<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>wire-runtime<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>3.0.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>With Gradle:</p>
<div class="codehilite"><pre><span></span><span class="n">api</span> <span class="s1">&#39;com.squareup.wire:wire-runtime:3.0.1&#39;</span>
</pre></div>

<p>Snapshots of the development version are available in <a href="https://oss.sonatype.org/content/repositories/snapshots/">Sonatype&rsquo;s <code>snapshots</code> repository</a>.</p>
<h2 id="unsupported">Unsupported<a class="headerlink" href="#unsupported" title="Permanent link">&para;</a></h2>
<p>Wire does not support:</p>
<ul>
<li>Groups - they are skipped when parsing binary input data</li>
</ul>
<p>Wire supports custom options on messages and fields. Other custom options are ignored. Pass
<code>--excludes=google.protobuf.*</code> to the compiler to omit options from the generated code.</p>
<h2 id="further-documentation">Further Documentation<a class="headerlink" href="#further-documentation" title="Permanent link">&para;</a></h2>
<p>See <a href="https://developers.google.com/protocol-buffers/docs/proto">Google&rsquo;s excellent documentation</a> on the structure and syntax of proto schemas.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="wire_compiler/" title="Gradle Plugin" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Gradle Plugin
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Square, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>